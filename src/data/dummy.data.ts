import { RawNodeDatum } from "react-d3-tree/lib/types/common";

export let dummyChildTwo_A = {
	name: "Land 3",
	attributes: {
		token: "0xd7893ed2422dbcb31fa0d295b2106ee603500e60064554f612897b2b629c7fa1",
		// geolocation
		geoLocation: {
			corners: [
				{
					lat: 12.123,
					lng: 12.123,
				},
				{
					lat: 12.123,
					lng: 12.123,
				},
				{
					lat: 12.123,
					lng: 12.123,
				},
				{
					lat: 12.123,
					lng: 12.123,
				},
			],
			center: {
				lat: 12.123,
				lng: 12.123,
			},
		},

		// reference
		isPolygon: false,
		isRectangle: true,

		// owner details
		owner: "Rana Singh I",
		ownerAddress: "Pushkar, Rajasthan",
		ownerEmail: "ranasingh@gmail.com",
		ownerPhone: "1234567890",

		// owner document details
		ownerDocuments: [
			{
				documentName: "Aadhar Card",
				documentLinks: ["https://aadhar.com/123"],
				documentHash: "123",
				verified: true,
			},
			{
				documentName: "Pan Card",
				documentLinks: ["https://pan.com/123"],
				documentHash: "1234567890",
				verified: true,
			},
		],

		// land document details
		landDocuments: [
			{
				documentName: "7/12",
				documentHash: "123",
				verified: true,
			},
			{
				documentName: "ROR",
				documentHash: "1234567890",
				verified: true,
			},
		],

		// land images
		landImages: [
			{
				imageHash: "123",
				imageLink:
					"https://mediacdn.99acres.com/media1/14951/17/299037954M-1622383195262.jpeg",
			},
			{
				imageHash: "1234567890",
				imageLink:
					"https://mediacdn.99acres.com/media1/18522/1/370441410M-1657299932217.jpg",
			},
		],

		// plot details
		price: 1000000,
		status: "Available",
		description: "This is a plot of land",

		// government details
		government: "Rajasthan",
		governmenttype: "State",

		// updates
		updates: [
			{
				message: "This is a message",
				timestamp: 1234567890,
			},
			{
				message: "This is a message two",
				timestamp: 1234567890,
			},
		],

		// timestamps
		createdAt: 1234567890,
		updatedAt: 1234567890,
		deletedAt: -1,

		// validation
		isChainValid: true,
	},
	children: [],
};

export let dummyChildTwo_B = {
	name: "Land 3",
	attributes: {
		token: "0xd7893ed2422dbcb31fa0d295b2106ee603500e60064554f612897b2b629c7fa1",
		// geolocation
		geoLocation: {
			corners: [
				{
					lat: 12.123,
					lng: 12.123,
				},
				{
					lat: 12.123,
					lng: 12.123,
				},
				{
					lat: 12.123,
					lng: 12.123,
				},
				{
					lat: 12.123,
					lng: 12.123,
				},
			],
			center: {
				lat: 12.123,
				lng: 12.123,
			},
		},

		// reference
		isPolygon: false,
		isRectangle: true,

		// owner details
		owner: "Rana Singh I",
		ownerAddress: "Pushkar, Rajasthan",
		ownerEmail: "ranasingh@gmail.com",
		ownerPhone: "1234567890",

		// owner document details
		ownerDocuments: [
			{
				documentName: "Aadhar Card",
				documentLinks: ["https://aadhar.com/123"],
				documentHash: "123",
				verified: true,
			},
			{
				documentName: "Pan Card",
				documentLinks: ["https://pan.com/123"],
				documentHash: "1234567890",
				verified: true,
			},
		],

		// land document details
		landDocuments: [
			{
				documentName: "7/12",
				documentHash: "123",
				verified: true,
			},
			{
				documentName: "ROR",
				documentHash: "1234567890",
				verified: true,
			},
		],

		// land images
		landImages: [
			{
				imageHash: "123",
				imageLink:
					"https://mediacdn.99acres.com/media1/14951/17/299037954M-1622383195262.jpeg",
			},
			{
				imageHash: "1234567890",
				imageLink:
					"https://mediacdn.99acres.com/media1/18522/1/370441410M-1657299932217.jpg",
			},
		],

		// plot details
		price: 1000000,
		status: "Available",
		description: "This is a plot of land",

		// government details
		government: "Rajasthan",
		governmenttype: "State",

		// updates
		updates: [
			{
				message: "This is a message",
				timestamp: 1234567890,
			},
			{
				message: "This is a message two",
				timestamp: 1234567890,
			},
		],

		// timestamps
		createdAt: 1234567890,
		updatedAt: 1234567890,
		deletedAt: -1,

		// validation
		isChainValid: true,
	},
	children: [],
};

export let dummyChildTwo_C = {
	name: "Land 3",
	attributes: {
		token: "0xd7893ed2422dbcb31fa0d295b2106ee603500e60064554f612897b2b629c7fa1",
		// geolocation
		geoLocation: {
			corners: [
				{
					lat: 12.123,
					lng: 12.123,
				},
				{
					lat: 12.123,
					lng: 12.123,
				},
				{
					lat: 12.123,
					lng: 12.123,
				},
				{
					lat: 12.123,
					lng: 12.123,
				},
			],
			center: {
				lat: 12.123,
				lng: 12.123,
			},
		},

		// reference
		isPolygon: false,
		isRectangle: true,

		// owner details
		owner: "Rana Singh I",
		ownerAddress: "Pushkar, Rajasthan",
		ownerEmail: "ranasingh@gmail.com",
		ownerPhone: "1234567890",

		// owner document details
		ownerDocuments: [
			{
				documentName: "Aadhar Card",
				documentLinks: ["https://aadhar.com/123"],
				documentHash: "123",
				verified: true,
			},
			{
				documentName: "Pan Card",
				documentLinks: ["https://pan.com/123"],
				documentHash: "1234567890",
				verified: true,
			},
		],

		// land document details
		landDocuments: [
			{
				documentName: "7/12",
				documentHash: "123",
				verified: true,
			},
			{
				documentName: "ROR",
				documentHash: "1234567890",
				verified: true,
			},
		],

		// land images
		landImages: [
			{
				imageHash: "123",
				imageLink:
					"https://mediacdn.99acres.com/media1/14951/17/299037954M-1622383195262.jpeg",
			},
			{
				imageHash: "1234567890",
				imageLink:
					"https://mediacdn.99acres.com/media1/18522/1/370441410M-1657299932217.jpg",
			},
		],

		// plot details
		price: 1000000,
		status: "Available",
		description: "This is a plot of land",

		// government details
		government: "Rajasthan",
		governmenttype: "State",

		// updates
		updates: [
			{
				message: "This is a message",
				timestamp: 1234567890,
			},
			{
				message: "This is a message two",
				timestamp: 1234567890,
			},
		],

		// timestamps
		createdAt: 1234567890,
		updatedAt: 1234567890,
		deletedAt: -1,

		// validation
		isChainValid: true,
	},
	children: [],
};

export let dummyChildOne = {
	name: "Land 2",
	attributes: {
		token: "0x1d1486136247c148cfc31d9f5028b3c487c724c7b5ba0560fe57bd63d530e890",
		// geolocation
		geoLocation: {
			corners: [
				{
					lat: 12.123,
					lng: 12.123,
				},
				{
					lat: 12.123,
					lng: 12.123,
				},
				{
					lat: 12.123,
					lng: 12.123,
				},
				{
					lat: 12.123,
					lng: 12.123,
				},
			],
			center: {
				lat: 12.123,
				lng: 12.123,
			},
		},

		// reference
		isPolygon: false,
		isRectangle: true,

		// owner details
		owner: "Rana Singh I",
		ownerAddress: "Pushkar, Rajasthan",
		ownerEmail: "ranasingh@gmail.com",
		ownerPhone: "1234567890",

		// owner document details
		ownerDocuments: [
			{
				documentName: "Aadhar Card",
				documentLinks: ["https://aadhar.com/123"],
				documentHash: "123",
				verified: true,
			},
			{
				documentName: "Pan Card",
				documentLinks: ["https://pan.com/123"],
				documentHash: "1234567890",
				verified: true,
			},
		],

		// land document details
		landDocuments: [
			{
				documentName: "7/12",
				documentHash: "123",
				verified: true,
			},
			{
				documentName: "ROR",
				documentHash: "1234567890",
				verified: true,
			},
		],

		// land images
		landImages: [
			{
				imageHash: "123",
				imageLink:
					"https://mediacdn.99acres.com/media1/14951/17/299037954M-1622383195262.jpeg",
			},
			{
				imageHash: "1234567890",
				imageLink:
					"https://mediacdn.99acres.com/media1/18522/1/370441410M-1657299932217.jpg",
			},
		],

		// plot details
		price: 1000000,
		status: "Available",
		description: "This is a plot of land",

		// government details
		government: "Rajasthan",
		governmenttype: "State",

		// updates
		updates: [
			{
				message: "This is a message",
				timestamp: 1234567890,
			},
			{
				message: "This is a message two",
				timestamp: 1234567890,
			},
		],

		// timestamps
		createdAt: 1234567890,
		updatedAt: 1234567890,
		deletedAt: -1,

		// validation
		isChainValid: true,
	},
	children: [],
};

export let dummyChildTwo = {
	name: "Land 3",
	attributes: {
		token: "0xd7893ed2422dbcb31fa0d295b2106ee603500e60064554f612897b2b629c7fa1",
		// geolocation
		geoLocation: {
			corners: [
				{
					lat: 12.123,
					lng: 12.123,
				},
				{
					lat: 12.123,
					lng: 12.123,
				},
				{
					lat: 12.123,
					lng: 12.123,
				},
				{
					lat: 12.123,
					lng: 12.123,
				},
			],
			center: {
				lat: 12.123,
				lng: 12.123,
			},
		},

		// reference
		isPolygon: false,
		isRectangle: true,

		// owner details
		owner: "Rana Singh I",
		ownerAddress: "Pushkar, Rajasthan",
		ownerEmail: "ranasingh@gmail.com",
		ownerPhone: "1234567890",

		// owner document details
		ownerDocuments: [
			{
				documentName: "Aadhar Card",
				documentLinks: ["https://aadhar.com/123"],
				documentHash: "123",
				verified: true,
			},
			{
				documentName: "Pan Card",
				documentLinks: ["https://pan.com/123"],
				documentHash: "1234567890",
				verified: true,
			},
		],

		// land document details
		landDocuments: [
			{
				documentName: "7/12",
				documentHash: "123",
				verified: true,
			},
			{
				documentName: "ROR",
				documentHash: "1234567890",
				verified: true,
			},
		],

		// land images
		landImages: [
			{
				imageHash: "123",
				imageLink:
					"https://mediacdn.99acres.com/media1/14951/17/299037954M-1622383195262.jpeg",
			},
			{
				imageHash: "1234567890",
				imageLink:
					"https://mediacdn.99acres.com/media1/18522/1/370441410M-1657299932217.jpg",
			},
		],

		// plot details
		price: 1000000,
		status: "Available",
		description: "This is a plot of land",

		// government details
		government: "Rajasthan",
		governmenttype: "State",

		// updates
		updates: [
			{
				message: "This is a message",
				timestamp: 1234567890,
			},
			{
				message: "This is a message two",
				timestamp: 1234567890,
			},
		],

		// timestamps
		createdAt: 1234567890,
		updatedAt: 1234567890,
		deletedAt: -1,

		// validation
		isChainValid: true,
	},
	children: [dummyChildTwo_A, dummyChildTwo_B, dummyChildTwo_C],
};

export let dummyData = {
	name: "Land 1",
	attributes: {
		token: "0x2dae3062a6028984535dace535dac538538662e69912fee1b08cf0a43fc9c",
		// geolocation
		geoLocation: {
			corners: [
				{
					lat: 12.123,
					lng: 12.123,
				},
				{
					lat: 12.123,
					lng: 12.123,
				},
				{
					lat: 12.123,
					lng: 12.123,
				},
				{
					lat: 12.123,
					lng: 12.123,
				},
			],
			center: {
				lat: 12.123,
				lng: 12.123,
			},
		},

		// reference
		isPolygon: false,
		isRectangle: true,

		// owner details
		owner: "Rana Singh I",
		ownerAddress: "Pushkar, Rajasthan",
		ownerEmail: "ranasingh@gmail.com",
		ownerPhone: "1234567890",

		// owner document details
		ownerDocuments: [
			{
				documentName: "Aadhar Card",
				documentLinks: [
					"https://aadhar.com/123",
					"https://aadhar.com/456",
				],
				documentHash: "123",
				verified: true,
			},
			{
				documentName: "Pan Card",
				documentLinks: ["https://pan.com/123"],
				documentHash: "1234567890",
				verified: true,
			},
		],

		// land document details
		landDocuments: [
			{
				documentName: "7/12",
				documentHash: "123",
				documentLinks: ["https://7-12.com/123"],
				verified: true,
			},
			{
				documentName: "ROR",
				documentHash: "1234567890",
				documentLinks: ["https://ror.com/123"],
				verified: true,
			},
		],

		// land images
		landImages: [
			{
				imageHash: "123",
				imageLink:
					"https://mediacdn.99acres.com/media1/14951/17/299037954M-1622383195262.jpeg",
			},
			{
				imageHash: "1234567890",
				imageLink:
					"https://mediacdn.99acres.com/media1/18522/1/370441410M-1657299932217.jpg",
			},
		],

		// plot details
		price: 1000000,
		status: "Available",
		description: "This is a plot of land",

		// government details
		government: "Rajasthan",
		governmenttype: "State",

		// updates
		updates: [
			{
				message: "This is a message",
				timestamp: 1234567890,
			},
			{
				message: "This is a message two",
				timestamp: 1234567890,
			},
		],

		// timestamps
		createdAt: 1234567890,
		updatedAt: 1234567890,
		deletedAt: -1,

		// validation
		isChainValid: true,
	},
	children: [dummyChildOne, dummyChildTwo],
};

// recusively loop through the tree
// if attribute is an object or array, then remove it
// else add it to the tree
// return the tree

const irrelevantAttributes = [
	"isPolygon",
	"isRectangle",
	"createdAt",
	"updatedAt",
	"deletedAt",
	"isChainValid",
	"status",
	"ownerAddress",
];

export const removeAttributes = (node: any) => {
	if (node.attributes) {
		for (let key in node.attributes) {
			if (typeof node.attributes[key] === "object") {
				delete node.attributes[key];
			}

			if (irrelevantAttributes.includes(key)) {
				delete node.attributes[key];
			}
		}
	}
	if (node.children) {
		node.children.forEach((child: any) => {
			removeAttributes(child);
		});
	}
	return node as RawNodeDatum;
};

export const findNode = (node: any, id: string) => {
	if (node.attributes?.token === id) {
		return node;
	}
	if (node.children) {
		for (let child of node.children) {
			let result: any = findNode(child, id);
			if (result) {
				return result;
			}
		}
	}
};

export const complexChain = {
	chain: [dummyData],
	createdAt: 1234567890,
	updatedAt: 1234567890,
};

// create deep copy of the chain
export const deepCopy = (chain: any) => {
	return JSON.parse(JSON.stringify(chain));
};

// add the root node to the chain
export const simpleChain = {
	chain: [removeAttributes(deepCopy(dummyData))],
	createdAt: 1234567890,
	updatedAt: 1234567890,
};
